---
/**
 * DrillCard - Full drill display with video, steps, and coaching cues
 */
interface Step {
  instruction: string;
}

interface Props {
  number: number;
  title: string;
  tags: string[];
  ageBadge?: { label: string; class: 'age-7-9' | 'age-10-13' | 'age-14-18' };
  description: string;
  steps: Step[];
  coachingCues: string[];
  duration: string;
  reps: string;
  difficulty: 'Beginner' | 'Intermediate' | 'Advanced' | 'Scalable';
  videoUrl?: string;
  theme?: 'basketball' | 'barefoot';
}

const {
  number,
  title,
  tags,
  ageBadge,
  description,
  steps,
  coachingCues,
  duration,
  reps,
  difficulty,
  videoUrl,
  theme = 'basketball',
} = Astro.props;

const numberBg = theme === 'barefoot' ? 'bg-copper' : 'bg-trust-blue';
const stepBg = theme === 'barefoot' ? 'bg-copper' : 'bg-gold';
const cueIcon = theme === 'barefoot' ? 'ü¶∂' : 'üëÅ';
const cueLabel = theme === 'barefoot' ? 'Coaching Cues' : 'Coaching Cues';
---

<article class="drill-card">
  <div class="drill-header">
    <div class={`drill-number ${numberBg}`}>
      {String(number).padStart(2, '0')}
    </div>
    <div class="flex-1">
      <h3 class="font-display font-semibold text-lg mb-1">{title}</h3>
      <div class="flex flex-wrap gap-2">
        {tags.map((tag) => (
          <span class="font-mono text-[0.6rem] px-1.5 py-0.5 bg-black/5 rounded-sm uppercase">
            {tag}
          </span>
        ))}
        {ageBadge && (
          <span class={`age-badge ${ageBadge.class}`}>{ageBadge.label}</span>
        )}
      </div>
    </div>
  </div>

  <div class="drill-body">
    <!-- Video Placeholder -->
    <div class={`aspect-video rounded-md flex items-center justify-center mb-4 relative bg-gradient-to-br ${theme === 'barefoot' ? 'from-moss to-bark' : 'from-trust-blue to-ink'}`}>
      <div class="absolute w-16 h-16 bg-white/20 rounded-full flex items-center justify-center">
        <div class="w-0 h-0 border-l-[20px] border-l-white border-y-[12px] border-y-transparent ml-1"></div>
      </div>
      {videoUrl ? (
        <span class="absolute bottom-2 right-2 font-mono text-xs text-white/70">Video</span>
      ) : (
        <span class="font-mono text-sm text-white/70">Video Coming Soon</span>
      )}
    </div>

    <!-- Description -->
    <p class="text-ink-soft text-[0.95rem] mb-4">{description}</p>

    <!-- Steps -->
    <ol class="list-none mb-4">
      {steps.map((step, i) => (
        <li class="relative pl-9 mb-2.5 text-[0.95rem]">
          <span class={`absolute left-0 top-0 w-6 h-6 ${stepBg} text-white rounded-full font-mono text-xs font-semibold flex items-center justify-center`}>
            {i + 1}
          </span>
          {step.instruction}
        </li>
      ))}
    </ol>

    <!-- Coaching Cues -->
    <div class="bg-paper-dark p-4 rounded-md">
      <div class="font-mono text-[0.65rem] uppercase tracking-widest text-gold mb-2">
        {cueLabel}
      </div>
      {coachingCues.map((cue) => (
        <div class="flex items-start gap-2 mb-1.5 text-sm">
          <span class="text-xs">{cueIcon}</span>
          <span>{cue}</span>
        </div>
      ))}
    </div>
  </div>

  <div class="drill-footer">
    <span class="flex items-center gap-1 text-ink-muted">
      <span>‚è±</span> {duration}
    </span>
    <span class="flex items-center gap-1 text-ink-muted">
      <span>üîÅ</span> {reps}
    </span>
    <span class="flex items-center gap-1 text-ink-muted">
      <span>‚ö°</span> {difficulty}
    </span>
  </div>
</article>

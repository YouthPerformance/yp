---
/**
 * Header - Glass morphism navigation with theme switcher
 * YP Design System v2.0
 */
interface Props {
  showThemeSwitcher?: boolean;
}

const { showThemeSwitcher = true } = Astro.props;

const navLinks = [
  { href: "/barefoot-training/", label: "Barefoot" },
  { href: "/basketball/", label: "Basketball" },
  { href: "/parent-sidelines/", label: "Parent Q&A" },
  { href: "/drills/", label: "Drills" },
];
---

<header class="header-glass">
  <div class="header-container">
    <!-- Logo + Beta Badge -->
    <div class="header-logo-group">
      <a href="/" class="header-logo">
        <span class="logo-wolf">YP</span>
        <span class="logo-text">Playbook</span>
      </a>
      <!-- Beta Badge -->
      <div class="beta-badge">
        <span class="beta-dot-wrapper">
          <span class="beta-dot-ping"></span>
          <span class="beta-dot"></span>
        </span>
        BETA
      </div>
    </div>

    <!-- Navigation -->
    <nav class="header-nav">
      {navLinks.map((link) => (
        <a
          href={link.href}
          class="nav-link"
          aria-current={Astro.url.pathname.startsWith(link.href) ? "page" : undefined}
        >
          {link.label}
        </a>
      ))}
    </nav>

    <!-- Actions -->
    <div class="header-actions">
      {showThemeSwitcher && (
        <button
          type="button"
          class="theme-switcher"
          onclick="window.cycleTheme()"
          aria-label="Toggle theme"
        >
          <svg class="theme-icon theme-icon-dark" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" />
          </svg>
          <svg class="theme-icon theme-icon-light" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="5" />
            <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" />
          </svg>
          <svg class="theme-icon theme-icon-parent" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2" />
            <circle cx="9" cy="7" r="4" />
            <path d="M23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75" />
          </svg>
        </button>
      )}

      <!-- CTA Button -->
      <a href="https://academy.youthperformance.com" class="header-cta">
        Start Training
      </a>

      <!-- Mobile Menu Button -->
      <button
        type="button"
        class="mobile-menu-btn"
        aria-label="Toggle menu"
        onclick="document.querySelector('.mobile-nav').classList.toggle('open')"
      >
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 12h18M3 6h18M3 18h18" />
        </svg>
      </button>
    </div>
  </div>

  <!-- Mobile Navigation -->
  <nav class="mobile-nav">
    {navLinks.map((link) => (
      <a href={link.href} class="mobile-nav-link">
        {link.label}
      </a>
    ))}
    <a href="https://academy.youthperformance.com" class="mobile-nav-cta">
      Start Training â†’
    </a>
  </nav>
</header>

<style>
  .header-glass {
    position: sticky;
    top: 0;
    z-index: 150;
    background: var(--glass-bg);
    backdrop-filter: blur(16px);
    border-bottom: 1px solid var(--glass-border);
  }

  .header-container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    max-width: 1200px;
    margin: 0 auto;
    padding: 12px 24px;
  }

  /* Logo Group (logo + beta badge) */
  .header-logo-group {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  /* Logo */
  .header-logo {
    display: flex;
    align-items: center;
    gap: 8px;
    text-decoration: none;
  }

  /* Beta Badge */
  .beta-badge {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 4px 12px;
    border-radius: 9999px;
    border: 1px solid var(--accent-primary);
    background-color: #000000;
    color: var(--accent-primary);
    box-shadow: 0 0 12px rgba(0, 246, 224, 0.15);
    font-family: ui-monospace, SFMono-Regular, monospace;
    font-size: 10px;
    font-weight: 700;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    user-select: none;
    transition: all 0.3s ease-out;
  }

  .beta-badge:hover {
    box-shadow: 0 0 20px rgba(0, 246, 224, 0.4);
    background-color: rgba(0, 246, 224, 0.05);
  }

  .beta-dot-wrapper {
    position: relative;
    display: flex;
    height: 6px;
    width: 6px;
  }

  .beta-dot-ping {
    position: absolute;
    display: inline-flex;
    height: 100%;
    width: 100%;
    border-radius: 9999px;
    opacity: 0.75;
    background-color: #22d3ee;
    animation: ping 1s cubic-bezier(0, 0, 0.2, 1) infinite;
  }

  .beta-dot {
    position: relative;
    display: inline-flex;
    border-radius: 9999px;
    height: 6px;
    width: 6px;
    background-color: var(--accent-primary);
  }

  @keyframes ping {
    75%, 100% {
      transform: scale(2);
      opacity: 0;
    }
  }

  .logo-wolf {
    font-family: "Bebas Neue", sans-serif;
    font-size: 1.5rem;
    letter-spacing: 0.05em;
    background: var(--gradient-cyan);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .logo-text {
    font-family: "Inter", sans-serif;
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-primary);
  }

  /* Navigation */
  .header-nav {
    display: none;
    gap: 8px;
  }

  @media (min-width: 768px) {
    .header-nav {
      display: flex;
    }
  }

  .nav-link {
    padding: 8px 16px;
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--text-secondary);
    text-decoration: none;
    border-radius: 8px;
    transition: all 200ms ease;
  }

  .nav-link:hover {
    color: var(--accent-primary);
    background-color: rgba(var(--accent-primary-rgb), 0.1);
  }

  .nav-link[aria-current="page"] {
    color: var(--accent-primary);
    background-color: rgba(var(--accent-primary-rgb), 0.15);
  }

  /* Actions */
  .header-actions {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  /* Theme Switcher */
  .theme-switcher {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border: none;
    border-radius: 8px;
    background: transparent;
    cursor: pointer;
    color: var(--text-secondary);
    transition: all 200ms ease;
  }

  .theme-switcher:hover {
    color: var(--accent-primary);
    background-color: rgba(var(--accent-primary-rgb), 0.1);
  }

  .theme-icon {
    width: 20px;
    height: 20px;
    display: none;
  }

  /* Show appropriate icon based on current theme */
  :global([data-theme="athlete"]) .theme-icon-dark {
    display: block;
  }

  :global([data-theme="athlete-light"]) .theme-icon-light {
    display: block;
  }

  :global([data-theme="parent"]) .theme-icon-parent {
    display: block;
  }

  /* Default to dark icon if no theme set */
  :global(:not([data-theme])) .theme-icon-dark {
    display: block;
  }

  /* CTA Button */
  .header-cta {
    display: none;
    padding: 10px 20px;
    font-size: 0.875rem;
    font-weight: 600;
    color: #000000;
    text-decoration: none;
    border-radius: 8px;
    background: var(--gradient-cyan);
    transition: all 200ms ease;
  }

  @media (min-width: 768px) {
    .header-cta {
      display: block;
    }
  }

  .header-cta:hover {
    transform: translateY(-2px);
    box-shadow: 0 0 20px rgba(var(--accent-primary-rgb), 0.4);
  }

  /* Mobile Menu Button */
  .mobile-menu-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border: none;
    border-radius: 8px;
    background: transparent;
    cursor: pointer;
    color: var(--text-primary);
  }

  .mobile-menu-btn svg {
    width: 24px;
    height: 24px;
  }

  @media (min-width: 768px) {
    .mobile-menu-btn {
      display: none;
    }
  }

  /* Mobile Navigation */
  .mobile-nav {
    display: none;
    flex-direction: column;
    gap: 4px;
    padding: 16px;
    border-top: 1px solid var(--border-default);
  }

  .mobile-nav.open {
    display: flex;
  }

  @media (min-width: 768px) {
    .mobile-nav {
      display: none !important;
    }
  }

  .mobile-nav-link {
    padding: 12px 16px;
    font-size: 1rem;
    font-weight: 500;
    color: var(--text-primary);
    text-decoration: none;
    border-radius: 8px;
    transition: all 200ms ease;
  }

  .mobile-nav-link:hover {
    background-color: var(--bg-tertiary);
  }

  .mobile-nav-cta {
    margin-top: 8px;
    padding: 14px 20px;
    font-size: 1rem;
    font-weight: 600;
    color: #000000;
    text-decoration: none;
    text-align: center;
    border-radius: 8px;
    background: var(--gradient-cyan);
  }
</style>

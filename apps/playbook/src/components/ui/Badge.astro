---
/**
 * Badge Component
 * YP Design System - Playbook
 *
 * @prop variant - 'cyan' | 'gold' | 'success' | 'warning' | 'error' | 'neutral'
 * @prop size - 'sm' | 'md'
 * @prop age - Age band badge (4-6, 7-9, 10-12, 13+)
 * @prop outline - Outline style
 */

interface Props {
  variant?: "cyan" | "gold" | "success" | "warning" | "error" | "neutral";
  size?: "sm" | "md";
  age?: "4-6" | "7-9" | "10-12" | "13+";
  outline?: boolean;
  class?: string;
}

const { variant = "cyan", size = "md", age, outline = false, class: className = "" } = Astro.props;

// If age prop is provided, use age-specific styling
const isAgeBadge = !!age;

// Size classes
const sizeClasses = {
  sm: "px-2 py-0.5 text-[10px]",
  md: "px-3 py-1 text-xs",
};

// Age band colors
const ageColors = {
  "4-6": { bg: "#22c55e", text: "#ffffff" }, // Green - littles
  "7-9": { bg: "#3b82f6", text: "#ffffff" }, // Blue - youth
  "10-12": { bg: "#f59e0b", text: "#000000" }, // Amber - tweens
  "13+": { bg: "#ef4444", text: "#ffffff" }, // Red - teens
};

// Variant colors (solid)
const variantSolid = {
  cyan: "bg-[var(--accent-primary)] text-[var(--bg-primary)]",
  gold: "bg-[var(--accent-gold)] text-[var(--bg-primary)]",
  success: "bg-[var(--state-success)] text-white",
  warning: "bg-[var(--state-warning)] text-black",
  error: "bg-[var(--state-error)] text-white",
  neutral: "bg-[var(--bg-elevated)] text-[var(--text-secondary)]",
};

// Variant colors (outline)
const variantOutline = {
  cyan: "border border-[var(--accent-primary)] text-[var(--accent-primary)] bg-transparent",
  gold: "border border-[var(--accent-gold)] text-[var(--accent-gold)] bg-transparent",
  success: "border border-[var(--state-success)] text-[var(--state-success)] bg-transparent",
  warning: "border border-[var(--state-warning)] text-[var(--state-warning)] bg-transparent",
  error: "border border-[var(--state-error)] text-[var(--state-error)] bg-transparent",
  neutral: "border border-[var(--border-default)] text-[var(--text-secondary)] bg-transparent",
};

const baseClasses =
  "inline-flex items-center justify-center font-bold uppercase tracking-wider whitespace-nowrap";

const classes = [baseClasses, sizeClasses[size], className];

if (isAgeBadge) {
  // Age badges have custom inline styles
} else {
  classes.push(outline ? variantOutline[variant] : variantSolid[variant]);
}
---

{isAgeBadge ? (
  <span
    class:list={classes}
    style={`background-color: ${ageColors[age!].bg}; color: ${ageColors[age!].text};`}
  >
    {age}
  </span>
) : (
  <span class:list={classes}>
    <slot />
  </span>
)}

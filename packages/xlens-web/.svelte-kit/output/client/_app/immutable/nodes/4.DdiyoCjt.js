import{f as c,a as v,c as A}from"../chunks/iRdQ0xtj.js";import{o as Ue}from"../chunks/DZ-iLIYQ.js";import{J as Ae,O as a,M as Me,K as n,g as s,U as Ce,s as M,V as B,P as Se,Q as i,R as I,T as b}from"../chunks/CapEeF5M.js";import{s as h}from"../chunks/BvqUIVqr.js";import{i as m}from"../chunks/CqVPvQJw.js";import{s as re}from"../chunks/oWoCID4_.js";import{s as ze}from"../chunks/CRBBPxwk.js";import{d as Fe}from"../chunks/Bvma8HCH.js";import{s as Je,a as Re}from"../chunks/DyTlRFN8.js";import{s as Ve,g as P}from"../chunks/CS0qxZ5J.js";const Le=!1,Oe=!1,vt=Object.freeze(Object.defineProperty({__proto__:null,prerender:Oe,ssr:Le},Symbol.toStringTag,{value:"Module"})),Be=()=>{const g=Ve;return{page:{subscribe:g.page.subscribe},navigating:{subscribe:g.navigating.subscribe},updated:g.updated}},Pe={subscribe(g){return Be().page.subscribe(g)}};var De=c('<div class="flex flex-col items-center justify-center py-20"><div class="w-12 h-12 border-2 border-yp-primary/30 border-t-yp-primary rounded-full animate-spin"></div> <p class="mt-4 text-white/60">Loading result...</p></div>'),Ne=c('<div class="text-center py-20"><div class="text-yp-error text-lg mb-2">Error</div> <p class="text-white/60"> </p> <button class="btn-primary mt-6">Try Again</button></div>'),$e=c('<div class="aspect-video bg-black/50"><img alt="Jump thumbnail" class="w-full h-full object-cover"/></div>'),Ee=c('<div class="aspect-video bg-black/50 flex items-center justify-center"><div class="text-white/40">Processing video...</div></div>'),Ge=c('<div class="text-center mb-6"><div class="text-6xl font-bold text-yp-primary"> </div> <div class="text-xl text-white/60 mt-1"> </div></div>'),qe=c('<div class="text-center mb-6 py-8"><div class="w-16 h-16 border-4 border-yp-primary/20 border-t-yp-primary rounded-full animate-spin mx-auto"></div> <div class="text-xl text-white/80 mt-6">Analyzing your jump...</div> <div class="text-sm text-white/50 mt-2">AI is measuring your vertical</div></div>'),Ke=c('<div class="text-center mb-6 py-4"><div class="w-16 h-16 rounded-full bg-red-500/20 flex items-center justify-center mx-auto"><svg class="w-8 h-8 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></div> <div class="text-xl text-white/80 mt-4">Analysis Failed</div> <div class="text-sm text-white/50 mt-2"> </div></div>'),Qe=c('<div class="bg-yp-warning/20 text-yp-warning rounded-lg p-4 mb-4"><p class="font-semibold">Flagged for Review</p> <p class="text-sm mt-1"> </p></div>'),He=c('<a target="_blank" class="btn-secondary w-full block text-center">View Full Video</a>'),We=c('<div class="bg-white/5 rounded-2xl overflow-hidden"><!> <div class="p-6"><!> <div class="flex justify-center mb-6"><div><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> <span class="font-semibold"> </span></div></div> <!> <div class="text-center text-sm text-white/40"> </div></div></div> <div class="mt-8 space-y-3"><button class="btn-primary w-full">Try Another Jump</button> <!></div>',1),Xe=c('<div class="min-h-screen bg-yp-dark p-6"><div class="max-w-md mx-auto"><div class="flex items-center justify-between mb-8"><button aria-label="Go back" class="p-2 -ml-2 text-white/60 hover:text-white"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button> <h1 class="text-xl font-semibold">Jump Result</h1> <div class="w-10"></div></div> <!></div></div>');function nt(g,D){Ae(D,!0);const ae=()=>Re(Pe,"$page",se),[se,ie]=Je();let oe=Ce(()=>ae().params.jumpId),o=B(null),N=B(!0),T=B(null),u=null,$="";Ue(()=>($="https://lovable-heron-569.convex.cloud".replace(".convex.cloud",".convex.site"),u=setInterval(async()=>{await E()},2e3),E(),()=>{u&&clearInterval(u)}));async function E(){try{const l=await fetch(`${$}/xlens/result`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jumpId:s(oe)})});if(l.ok){const r=await l.json();M(o,{jumpId:r.jumpId,userId:"",status:r.status,verificationTier:r.verificationTier,height:r.heightInches?{inches:r.heightInches,centimeters:r.heightCm||r.heightInches*2.54}:void 0,videoUrl:r.videoUrl,thumbnailUrl:void 0,processedAt:r.processedAt?new Date(r.processedAt):void 0,flags:r.flags},!0),(r.status==="complete"||r.status==="failed")&&u&&(clearInterval(u),u=null)}else{const r=await l.json();M(T,r.error||"Failed to load result",!0),u&&(clearInterval(u),u=null)}}catch(l){M(T,"Network error - please try again"),console.error("[xLENS] Result fetch error:",l)}finally{M(N,!1)}}function le(l){switch(l){case"gold":return"bg-yellow-500";case"silver":return"bg-gray-400";case"bronze":return"bg-amber-600";case"measured":return"bg-blue-500";default:return"bg-red-500"}}function ve(l){switch(l){case"gold":return"Gold Verified";case"silver":return"Silver Verified";case"bronze":return"Bronze Verified";case"measured":return"Measured";default:return"Rejected"}}var C=Xe(),G=a(C),S=a(G),ne=a(S);ne.__click=()=>P("/"),Se(4),i(S);var de=n(S,2);{var ce=l=>{var r=De();v(l,r)},ue=l=>{var r=A(),pe=I(r);{var me=_=>{var x=Ne(),w=n(a(x),2),z=a(w,!0);i(w);var j=n(w,2);j.__click=()=>P("/capture"),i(x),b(()=>h(z,s(T))),v(_,x)},fe=_=>{var x=A(),w=I(x);{var z=j=>{var q=We(),F=I(q),K=a(F);{var ge=e=>{var t=$e(),d=a(t);i(t),b(()=>re(d,"src",s(o).thumbnailUrl)),v(e,t)},be=e=>{var t=Ee();v(e,t)};m(K,e=>{s(o).thumbnailUrl?e(ge):e(be,!1)})}var Q=n(K,2),H=a(Q);{var he=e=>{var t=Ge(),d=a(t),k=a(d);i(d);var p=n(d,2),f=a(p);i(p),i(t),b((y,V)=>{h(k,`${y??""}"`),h(f,`${V??""} cm`)},[()=>s(o).height.inches.toFixed(1),()=>s(o).height.centimeters.toFixed(1)]),v(e,t)},_e=e=>{var t=A(),d=I(t);{var k=f=>{var y=qe();v(f,y)},p=f=>{var y=A(),V=I(y);{var Ie=L=>{var O=Ke(),te=n(a(O),4),Te=a(te,!0);i(te),i(O),b(U=>h(Te,U),[()=>{var U;return((U=s(o).flags)==null?void 0:U.join(", "))||"Could not process the video"}]),v(L,O)};m(V,L=>{s(o).status==="failed"&&L(Ie)},!0)}v(f,y)};m(d,f=>{s(o).status==="processing"?f(k):f(p,!1)},!0)}v(e,t)};m(H,e=>{s(o).height?e(he):e(_e,!1)})}var J=n(H,2),R=a(J),W=n(a(R),2),xe=a(W,!0);i(W),i(R),i(J);var X=n(J,2);{var ye=e=>{var t=Qe(),d=n(a(t),2),k=a(d,!0);i(d),i(t),b(p=>h(k,p),[()=>{var p;return((p=s(o).flags)==null?void 0:p.join(", "))||"This jump requires manual verification."}]),v(e,t)};m(X,e=>{s(o).status==="flagged"&&e(ye)})}var Y=n(X,2),we=a(Y);i(Y),i(Q),i(F);var Z=n(F,2),ee=a(Z);ee.__click=()=>P("/capture");var je=n(ee,2);{var ke=e=>{var t=He();b(()=>re(t,"href",s(o).videoUrl)),v(e,t)};m(je,e=>{s(o).videoUrl&&e(ke)})}i(Z),b((e,t,d)=>{ze(R,1,`inline-flex items-center gap-2 px-4 py-2 rounded-full ${e??""}`),h(xe,t),h(we,`Jump ID: ${d??""}`)},[()=>le(s(o).verificationTier),()=>ve(s(o).verificationTier),()=>s(o).jumpId.slice(0,8)]),v(j,q)};m(w,j=>{s(o)&&j(z)},!0)}v(_,x)};m(pe,_=>{s(T)?_(me):_(fe,!1)},!0)}v(l,r)};m(de,l=>{s(N)?l(ce):l(ue,!1)})}i(G),i(C),v(g,C),Me(),ie()}Fe(["click"]);export{nt as component,vt as universal};

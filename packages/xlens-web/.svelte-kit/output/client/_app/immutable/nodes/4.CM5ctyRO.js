import{f as m,a as d,c as F}from"../chunks/B-Tn0Iuz.js";import{o as ye}from"../chunks/Bx1MBOAJ.js";import{j as we,T as ke,U as je,V as Te,W as Ie,p as Me,c as o,a as Se,s as u,g as a,X as O,Y as Ae,h as S,n as Le,r as l,M as A,N as x}from"../chunks/D_JzRG0x.js";import{s as y}from"../chunks/CdyOn7Ui.js";import{i as _}from"../chunks/Dou0k9GB.js";import{s as Ne}from"../chunks/C6h3zICr.js";import{d as Ee}from"../chunks/Db4TDr3E.js";import{s as Ue,a as Re}from"../chunks/CUZPBNU_.js";import{s as Ve,g as $}from"../chunks/CumJ52HM.js";const ze=Symbol("is custom element"),Ce=Symbol("is html");function Z(e,i,v,g){var f=Fe(e);we&&(f[i]=e.getAttribute(i),i==="src"||i==="srcset"||i==="href"&&e.nodeName==="LINK")||f[i]!==(f[i]=v)&&(i==="loading"&&(e[ke]=v),v==null?e.removeAttribute(i):typeof v!="string"&&Oe(e).includes(i)?e[i]=v:e.setAttribute(i,v))}function Fe(e){return e.__attributes??(e.__attributes={[ze]:e.nodeName.includes("-"),[Ce]:e.namespaceURI===je})}var ee=new Map;function Oe(e){var i=e.getAttribute("is")||e.nodeName,v=ee.get(i);if(v)return v;ee.set(i,v=[]);for(var g,f=e,L=Element.prototype;L!==f;){g=Ie(f);for(var t in g)g[t].set&&v.push(t);f=Te(f)}return v}const $e=!1,Be=!1,vr=Object.freeze(Object.defineProperty({__proto__:null,prerender:Be,ssr:$e},Symbol.toStringTag,{value:"Module"})),Je=()=>{const e=Ve;return{page:{subscribe:e.page.subscribe},navigating:{subscribe:e.navigating.subscribe},updated:e.updated}},Pe={subscribe(e){return Je().page.subscribe(e)}};var Ge=m('<div class="flex flex-col items-center justify-center py-20"><div class="w-12 h-12 border-2 border-yp-primary/30 border-t-yp-primary rounded-full animate-spin"></div> <p class="mt-4 text-white/60">Loading result...</p></div>'),De=m('<div class="text-center py-20"><div class="text-yp-error text-lg mb-2">Error</div> <p class="text-white/60"> </p> <button class="btn-primary mt-6">Try Again</button></div>'),He=m('<div class="aspect-video bg-black/50"><img alt="Jump thumbnail" class="w-full h-full object-cover"/></div>'),Ye=m('<div class="aspect-video bg-black/50 flex items-center justify-center"><div class="text-white/40">Processing video...</div></div>'),qe=m('<div class="text-center mb-6"><div class="text-5xl font-bold text-yp-primary"> </div> <div class="text-white/60 mt-1"> </div></div>'),Ke=m('<div class="text-center mb-6"><div class="text-2xl text-white/60">Processing...</div> <div class="w-8 h-8 border-2 border-yp-primary/30 border-t-yp-primary rounded-full animate-spin mx-auto mt-4"></div></div>'),We=m('<div class="bg-yp-warning/20 text-yp-warning rounded-lg p-4 mb-4"><p class="font-semibold">Flagged for Review</p> <p class="text-sm mt-1"> </p></div>'),Xe=m('<a target="_blank" class="btn-secondary w-full block text-center">View Full Video</a>'),Qe=m('<div class="bg-white/5 rounded-2xl overflow-hidden"><!> <div class="p-6"><!> <div class="flex justify-center mb-6"><div><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> <span class="font-semibold"> </span></div></div> <!> <div class="text-center text-sm text-white/40"> </div></div></div> <div class="mt-8 space-y-3"><button class="btn-primary w-full">Try Another Jump</button> <!></div>',1),Ze=m('<div class="min-h-screen bg-yp-dark p-6"><div class="max-w-md mx-auto"><div class="flex items-center justify-between mb-8"><button aria-label="Go back" class="p-2 -ml-2 text-white/60 hover:text-white"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button> <h1 class="text-xl font-semibold">Jump Result</h1> <div class="w-10"></div></div> <!></div></div>');function dr(e,i){Me(i,!0);const v=()=>Re(Pe,"$page",g),[g,f]=Ue();let L=Ae(()=>v().params.jumpId),t=O(null),B=O(!0),I=O(null),w=null;ye(()=>(J().then(()=>{a(t)&&a(t).status!=="complete"&&(w=setInterval(async()=>{var n;await J(),((n=a(t))==null?void 0:n.status)==="complete"&&w&&clearInterval(w)},3e3))}),()=>{w&&clearInterval(w)}));async function J(){try{const n=await fetch(`/api/jumps/${a(L)}`);n.ok?S(t,await n.json(),!0):S(I,"Failed to load result")}catch{S(I,"Network error")}finally{S(B,!1)}}function re(n){switch(n){case"gold":return"bg-yellow-500";case"silver":return"bg-gray-400";case"bronze":return"bg-amber-600";case"measured":return"bg-blue-500";default:return"bg-red-500"}}function te(n){switch(n){case"gold":return"Gold Verified";case"silver":return"Silver Verified";case"bronze":return"Bronze Verified";case"measured":return"Measured";default:return"Rejected"}}var N=Ze(),P=o(N),E=o(P),se=o(E);se.__click=()=>$("/"),Le(4),l(E);var ae=u(E,2);{var ie=n=>{var M=Ge();d(n,M)},oe=n=>{var M=F(),le=A(M);{var ne=b=>{var h=De(),k=u(o(h),2),U=o(k,!0);l(k);var j=u(k,2);j.__click=()=>$("/capture"),l(h),x(()=>y(U,a(I))),d(b,h)},ve=b=>{var h=F(),k=A(h);{var U=j=>{var G=Qe(),R=A(G),D=o(R);{var de=r=>{var s=He(),c=o(s);l(s),x(()=>Z(c,"src",a(t).thumbnailUrl)),d(r,s)},ce=r=>{var s=Ye();d(r,s)};_(D,r=>{a(t).thumbnailUrl?r(de):r(ce,!1)})}var H=u(D,2),Y=o(H);{var ue=r=>{var s=qe(),c=o(s),T=o(c);l(c);var p=u(c,2),C=o(p);l(p),l(s),x((he,xe)=>{y(T,`${he??""}"`),y(C,`${xe??""} cm`)},[()=>a(t).height.inches.toFixed(1),()=>a(t).height.centimeters.toFixed(1)]),d(r,s)},pe=r=>{var s=F(),c=A(s);{var T=p=>{var C=Ke();d(p,C)};_(c,p=>{a(t).status==="processing"&&p(T)},!0)}d(r,s)};_(Y,r=>{a(t).height?r(ue):r(pe,!1)})}var V=u(Y,2),z=o(V),q=u(o(z),2),fe=o(q,!0);l(q),l(z),l(V);var K=u(V,2);{var me=r=>{var s=We(),c=u(o(s),2),T=o(c,!0);l(c),l(s),x(p=>y(T,p),[()=>{var p;return((p=a(t).flags)==null?void 0:p.join(", "))||"This jump requires manual verification."}]),d(r,s)};_(K,r=>{a(t).status==="flagged"&&r(me)})}var W=u(K,2),_e=o(W);l(W),l(H),l(R);var X=u(R,2),Q=o(X);Q.__click=()=>$("/capture");var ge=u(Q,2);{var be=r=>{var s=Xe();x(()=>Z(s,"href",a(t).videoUrl)),d(r,s)};_(ge,r=>{a(t).videoUrl&&r(be)})}l(X),x((r,s,c)=>{Ne(z,1,`inline-flex items-center gap-2 px-4 py-2 rounded-full ${r??""}`),y(fe,s),y(_e,`Jump ID: ${c??""}`)},[()=>re(a(t).verificationTier),()=>te(a(t).verificationTier),()=>a(t).jumpId.slice(0,8)]),d(j,G)};_(k,j=>{a(t)&&j(U)},!0)}d(b,h)};_(le,b=>{a(I)?b(ne):b(ve,!1)},!0)}d(n,M)};_(ae,n=>{a(B)?n(ie):n(oe,!1)})}l(P),l(N),d(e,N),Se(),f()}Ee(["click"]);export{dr as component,vr as universal};
